# 質問の順番変更ガイド

このドキュメントでは、LINE Bot のアンケート質問の順番を変更する方法を説明します。

---

## 📋 質問の順番を変更する方法

質問の順番は`lib/questions.ts`の`QUESTIONS`配列の順序で決まります。配列の順序を変更するだけで、質問の順番が変わります。

---

## 🔧 変更手順

### 1. `lib/questions.ts`ファイルを開く

```bash
code lib/questions.ts
```

### 2. `QUESTIONS`配列の順序を変更

配列内の質問オブジェクトの順序を変更します。配列の最初の要素が最初の質問、2 番目の要素が 2 番目の質問...となります。

**重要**: 配列の最初の要素が最初の質問として使用されます。`step`の値は任意で設定できます。

---

## 📝 現在の質問順序

現在の質問順序は以下の通りです：

1. **文理区分** (`bunri`)
2. **学年** (`grade`)
3. **性別** (`gender`)
4. **卒業年度** (`graduation`)
5. **名前** (`name_input`) ← 最初の質問として設定されている
6. **大学名** (`university`)

---

## 🔄 順序変更の例

### 例 1: 名前を最初に表示する場合

```typescript
export const QUESTIONS: Question[] = [
  {
    key: "name",
    step: "name_input", // 最初の質問として表示されます（stepの値は任意）
    title: "お名前を入力してください",
    subtitle: "例：山田 太郎",
    options: [],
  },
  {
    key: "university",
    step: "university",
    title: "大学名を教えてください",
    subtitle: "例：東京大学",
    options: [],
  },
  {
    key: "bunri",
    step: "bunri",
    title: "文理区分を教えてください",
    subtitle: "最適な案内のために、まずは1つ選択してください。",
    options: ["文系", "理系"],
  },
  {
    key: "grade",
    step: "grade",
    title: "学年を教えてください",
    subtitle: "最適な案内のために、まずは1つ選択してください。",
    options: ["1回生", "2回生", "3回生", "4回生"],
  },
  {
    key: "gender",
    step: "gender",
    title: "性別を教えてください",
    subtitle: "最適な案内のために、まずは1つ選択してください。",
    options: ["男性", "女性"],
  },
  {
    key: "graduation",
    step: "graduation",
    title: "卒業年度を教えてください",
    subtitle: "卒業予定の年度を選択してください。",
    options: ["2026", "2027", "2028", "2029"],
  },
];
```

### 例 2: 大学名を最初に表示する場合

```typescript
export const QUESTIONS: Question[] = [
  {
    key: "university",
    step: "university", // 最初の質問として表示されます（stepの値は任意）
    title: "大学名を教えてください",
    subtitle: "例：東京大学",
    options: [],
  },
  {
    key: "name",
    step: "name", // 2番目の質問
    title: "お名前を入力してください",
    subtitle: "例：山田 太郎",
    options: [],
  },
  // ... 残りの質問
];
```

**注意**: 配列の最初の要素が自動的に最初の質問として使用されます。`step`の値は任意で設定できます。

---

## ⚠️ 重要な注意事項

### 1. 配列の最初の要素が最初の質問として使用されます

友だち追加時に最初に表示される質問は、`QUESTIONS`配列の最初の要素（`QUESTIONS[0]`）です。配列の順序を変更するだけで、最初の質問を変更できます。

### 2. `step`の値は一意である必要があります

各質問の`step`値は一意である必要があります。同じ`step`値を持つ質問が複数あると、正しく動作しません。

### 3. `key`の値も一意である必要があります

各質問の`key`値は一意である必要があります。回答は`key`を使って保存されるため、重複があると上書きされてしまいます。

---

## 🔍 動作確認

順序を変更した後：

1. ファイルを保存
2. 開発サーバーを再起動（`npm run dev`）
3. LINE Bot で友だち追加をテスト
4. 質問が新しい順序で表示されることを確認

---

## 📚 関連ファイル

- `lib/questions.ts` - 質問の定義
- `app/api/line/webhook/route.ts` - 質問の処理ロジック
- `lib/types.ts` - 質問の型定義

---

## 💡 ヒント

- 質問の順序を変更する際は、ユーザー体験を考慮してください
- 簡単な質問から始めることで、離脱率を下げられます
- 必須情報を最初に聞くことで、データの質を向上できます
